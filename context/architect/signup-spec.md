# サインアップ仕様書（every_item_mng）

## 概要
本システムのサインアップ（新規ユーザー登録）は、Supabase Authのメールアドレス＋パスワード認証を利用し、セキュアかつシンプルな運用とする。

---

## 1. サインアップ画面
- 入力項目：
  - メールアドレス（email）
  - パスワード（password）
- UI：
  - メールアドレス、パスワードの入力欄
  - 「登録」ボタン
  - メッセージ表示欄（成功・失敗・確認メール送信案内）

---

## 2. サインアップ処理
- Supabase Authの`signUpWithPassword({ email, password })`を利用
- サインアップ成功時は、確認メール送信案内を表示
- サインアップ失敗時は、エラーメッセージを表示

---

## 3. メール認証
- サインアップ後、Supabase Authが自動で確認メールを送信
- ユーザーはメール内のリンクをクリックして本登録完了

---

## 4. profilesテーブル連携
- サインアップ時、Edge Function/Database Webhookによりauth.users→profilesへ自動でレコード追加
- profilesテーブルの初期値：
  - id: auth.users.id
  - name: 未登録
  - role: user
  - branch_id: null
- ロールや支店情報は管理者が後から編集可能

---

## 5. セキュリティ・運用
- パスワードはSupabase Authで安全に管理（自前DBには保存しない）
- メール認証必須
- サインアップ画面は誰でもアクセス可能

---

## 6. 拡張案
- 氏名や初期ロールをサインアップ時に入力させる場合は、サインアップ後に管理者がprofilesを編集
- Google等のOAuth認証も将来的に追加可能

---

## 備考
- 本仕様は最小構成のため、必要に応じてバリデーションやUI/UXの強化を推奨
